ifndef::env-github[]
include::config.adoc[]
endif::[]

ifdef::env-github,env-browser[:outfilesuffix: .adoc]

= AsciiSpec Userguide
:toc: left
:revnumber: 2.0
:find:
:release: 2


This userguide covers the basics of common and practical AsciiDoc syntax along with tips for using AsciiSpec.



[.language-asciidoc]
== Document Structure

In order that we understand the use of AsciiSpec processors, it's important to know the context in which they function.
This section provides a brief overview of how an AsciiDoc document is structured.
The following list is a simplified overview of the AsciiDoctor AST:

[horizontal]
`Document`:: The document contains `Sections` and `Blocks` that make up the document and holds the document attributes.

`Section`:: Models sections in the document and dictates the structure of the `Document` tree.

`Blocks`:: Content within a `Section`, differentiated by *context* such as 'paragraph' or 'image'.

`Lists`, `Tables`, `ListItems`...:: Nested content within a `Block`. Can also themselves be `Blocks`.

=== Sections

Section levels are set using equals symbols (`= title`) followed by a space and the title. They must be preceded by an empty line:

.Section Levels
[source,adoc]
----
= Document Title (Level 0)

== Level 1 Section Title

=== Level 2 Section Title

==== Level 3 Section Title

===== Level 4 Section Title

== Another Level 1 Section Title
----

Documents with two Level 0 (`=`) Sections need the `:doctype: book` attribute set.

It's illegal to skip section:

[source,adoc]
----
== Level 1 Section

==== Level 3 Section - Error!
----

[.language-asciidoc]
== Blocks

Usage::

[source,asciidoc]
----
[quote]
Before I came here I was confused about this subject.
Having listened to your lecture I am still confused.
But on a higher level.
----

The above content will be rendered as follows:

[quote,Enrico Fermi,Notes on Quantum Mechanics (1954)]
Before I came here I was confused about this subject. Having listened to your lecture I am still confused. But on a higher level.


Blocks are content in a section with styles or `contexts` such as paragraphs, source listings, images, etc.
Square brackets `[]` are used to indicate the style of the block and an empty line indicates that the block has finished.
All plain text of one or more lines will be parsed as a `block` with the 'paragraph' style by default, therefore:

[source,asciidoc]
----
It was the best of times..

// Is the same as writing the following:

[paragraph]
It was the best of times..
----


A list of built-in block types can be found in the http://asciidoctor.org/docs/user-manual/#built-in-blocks-summary[AsciiDoctor User Manual: built-in blocks summary].

=== Titles & attributes

Adding a title to a block of content is done by adding a fullstop followed by the title text in the line previous to the block.

To style a block with a source `listing` context, we use `[source]` as with this example:

[source,asciidoc]
-----
.Fibonacci.n4js // <1>
[source,n4js]   // <2>
----  			// <3>
export public class Fibonacci {
 public seq()  {

      var arr = [];
// etc...
----
-----
<1> In the first line we add a _title_ to a block. This is done using a full stop followed by the title `Fibonacci.n4js` (note there is no space). A title can be added in this way to many different block types by default.
<2> Setting a `source` context and the language is `N4JS`.
<3> Notice the use of four hyphens to delimit the block: `----` (see <<Delimiters>>) this indicates to the parser where the block begins and ends. The listing block can then also include the empty line:

*_Output:_*

.Fibonacci.n4js
[source,n4js]
----
export public class Fibonacci {
 public seq()  {

      var arr = [];
// etc...
----

We can add more attributes relevant to the type of block.
In the case of a `[verse]` block, we can set the author and the source separated with commas like so: `[verse, Carl Sagan, Cosmos]`.

[source,asciidoc]
----
.Deep Thought of the Day
[verse, Carl Sagan, Cosmos: A Personal Voyage]
If you want to make an apple pie from scratch, you must first create the universe.
----

The above is rendered as follows:

.Deep Thought of the Day
[verse, Carl Sagan, Cosmos: A Personal Voyage]
If you want to make an apple pie from scratch, you must first create the universe.

=== Delimiters

For all built-in blocks, the square brackets containing the block type (e.g. `[source]`) can be omitted and their delimiters will be used to determine the block type instead. For source blocks, this is four hyphens (`----`);

TIP: This is convenient, but, of course, no positional attributes i.e. `[blocktype,attr1,attr2]` can be specified. In the case of listing blocks, this means no language can be specified for highlighting in the default manner e.g. `[source,java]`.

.Set Block Type by Delmiter
====

[cols=2]
|===
^| Source ^| Output

a|

[source,adoc]
-----
----
my code() {

string example...
----
-----
a|

----
my code() {

string example...
----

|===
====

For a full list of delimiters, refer to the http://asciidoctor.org/docs/user-manual/#built-in-blocks-summary[Asciidoctor User Manual: Built-in Block Summary].


=== Admonition Blocks

*Usage:*

[source,asciidoc]
WARNING: Don't divide by zero...


A useful feature built-in to AsciiDoctor is the inclusion of admonition blocks.
By default, the following admonition blocks are available;

* `TIP`
* `NOTE`
* `IMPORTANT`
* `CAUTION`
* `WARNING`

They render as with the `WARNING` block below, except with different <<Icons>>.

WARNING: Don't divide by zero. In ordinary arithmetic, the expression has no meaning, as there is no number which...

The standard block syntax can also be used if the admonition spans multiple paragraphs:

.Delimited Admonition Block
====

[cols=2]
|===
^| Source ^| Output

a|
[source,adoc]
----
[WARNING]
--
Don't divide by zero.

In ordinary arithmetic, the expression has no meaning, as there is no number which, multiplied by 0..
--
----
a|
[WARNING]
--
Don't divide by zero.

In ordinary arithmetic, the expression has no meaning, as there is no number which, multiplied by 0..
--
|===
====

=== Nesting Blocks

Blocks can contain other blocks:

[cols=2]
|===
^| Source ^| Output

a|

[source,asciidoc]
-----
.Nested Listing
====
See the following code snippet:

----
my code() {

// etc...
----

====
-----

a|


.Nested Listing
====
See the following code snippet, for example:

----
my code() {

// etc...
----

====

|===

Nesting blocks of the same type is done using a different number of delimiters:

[cols=2]
|===
^| Source ^| Output

a|

[source,adoc]
------
.Outer Example
===== // <1>

.Inner Example
==== // <2>

See the following code snippet:

[source,html]
----
<div id="footnotes">
----

====

=====

------
<1> Outer delimiter uses 5 characters
<2> Inner delimiter uses 4 characters

a|

.Outer Example
=====

.Inner Example
====

See the following code snippet:

[source,html]
----
<div id="footnotes">
----

====

=====

|===




=== Github Flavored Markdown

Some common https://guides.github.com/features/mastering-markdown/[Github Markdown] is also supported, such as backticks used for code listings:

[source,asciidoc]
----
```n4js
export public class Fibonacci {
 public seq()  {

      var arr = [];
// etc...
```
----

[.language-asciidoc]
== CSS classes

CSS classes can be added to blocks in Asciidoc by using the the 'dot-prefix' syntax `[.css-class]` on the preceding line or by using the `role=` attribute:

.Applying CSS Classes
====

[cols=2]
|===
^| Source ^| Output

a|

[[block-css-class]]

[source,asciidoc]
----
[.xx-large]
This paragraph is assigned the `xx-large` CSS class.

[role=blue]
Lovely Calming Blue Text on every character of the brief, yet poignant sentence.
----


a|
[.xx-large]
This paragraph is assigned the `xx-large` CSS class.

[role=blue]
Lovely Calming Blue Text on every character of the brief, yet poignant sentence.

|===

Let's set the CSS class `xx-small` on the source block below using the using the `role=` attribute to change the text size for this long console log:

`[source,bash,role=xx-small]`

*Output:*

[source,bash,role=xx-small]
----
Downloading: https://repo.maven.apache.org/maven2/com/google/guava/guava/13.0-rc2/guava-13.0-rc2.pom
Downloaded: https://repo.maven.apache.org/maven2/com/google/guava/guava/13.0-rc2/guava-13.0-rc2.pom (6 KB at 60.0 KB/sec)
Downloading: http://www2.ph.ed.ac.uk/maven2/com/google/guava/guava-parent/13.0-rc2/guava-parent-13.0-rc2.pom
...
----


When using GFM footnote:[<<Github Flavored Markdown>>], it's possible with the following syntax:

[cols=2]
|===

a|

[source,adoc]
----
[.xx-small]
```bash
Downloaded: https://repo.maven.apache....
```
----

a|

[source,adoc]
----
[.xx-small.language-bash] // <1>
```
Downloaded: https://repo.maven.apache....
```
----
<1> An example of setting multiple CSS classes on a block: `xx-small` and `language-bash` for Prism syntax highlighting.
|===

====


=== Inline Syntax Highlighting (HTML)

When using http://prismjs.com/[Prism.js] (AsciiSpec default), CSS classes can be set inline using `[language-name]` before the code. +
Note that with blocks, a full stop before the CSS class is necessary, see <<block-css-class,the above example>>.

*Usage:* Make sure the charset `[language-html]pass:[`]<meta charset="utf-8" />pass:[`]` is set correctly.

*Output:* Make sure the charset [language-html]`<meta charset="utf-8" />` is set correctly.

The following example demonstrates some common cases of switching the language of inline syntax highlighting;

.Change Inline Syntax Highlighting Language
====

[cols=1]
|===
^| Source

a|

[source,asciidoc]
Check the [language-html]`<a href="favicon.ico"/>` favicon in the header. // <1>
Set the following id: `<div id="menubar">` on the menubar. +			  // <2>
Inline AsciiDoc macros (`macro:[]`) are useful!							  // <3>

^h| Output

a|

The favicon is located [language-html]`<a href="favicon.ico"/>` in the header. +
The menu bar was given the following id: `<div id="menubar">`. +
Inline AsciiDoc macros (`macro:[]`) are useful!
|===

<1> Only the first inline HTML listing is highlighted.
<2> The second piece of code is highlighted as AsciiDoc, hence the coloration (or lack thereof).
<3> Asciidoc is highlighted correctly.

NOTE: The `[language-html]` CSS class is overriding one already set on this section, see <<Applying CSS Classes to Sections>>. +
There is a lot of AsciiDoc to highlight in this document and so the parent section <<CSS classes>> has been assigned the class `[.language-adoc]`.

====

.Set Syntax Highlighter Language per Block
====
Instead of writing [language-adoc]`[language-html]` before every piece of inline code, a CSS class can be set to a paragraph or block.
All inline source code within that paragraph will then be highlighted with the language specified:

|===
a|
[source,asciidoc]
----
[.language-html]
The favicon was set at `<a href="favicon.ico"/>` in your header.
The next thing was the menubar: `<div id="menubar">` which contained a list `<ul class="fa-ul">`...
----

a|



[.language-html]
The favicon was set at `<a href="favicon.ico"/>` in your header. +
The next thing was the menubar: `<div id="menubar">` which contained a list `<ul class="fa-ul">`...

|===

====

=== Applying CSS Classes to Sections

It's also possible to set a class on a section. The highest section level that a CSS class can be applied on is the Level 1 (`==`) and all contained sections will inherit this class.


[cols=2]
|===
^|Source ^| Output

a|[source,asciidoc]
----
[.language-css]
== CSS
Everything enclosed in backticks in this
section gets styled with correct CSS `@media
print {code {text-shadow: none;}}`
syntax highlighting.

=== The `font-weight: bold;` attribute

Always use `font-weight: bold;` to get your point across...
----
a|
[.language-css]
== CSS
Everything enclosed in backticks in this
section gets styled with correct CSS `@media
print {code {text-shadow: none;}}`
syntax highlighting.

=== The `font-weight: bold;` attribute

Always use `font-weight: bold;` to get your point across...

|===

Some custom CSS has been added to the Foundation stylesheet specifically for styling large sections in this manner. +
One useful class is `[.todo]` which is demonstrated here;

[cols=2]
|===
^|Source ^| Output

a|
[source,asciidoc]
----
[.todo]
== Summary

. First Item
.. Second Item

=== Feature A 	// <1>

This feature needs documentation!

== Overview 	// <2>

Fully Documented, see...

----
<1> *Subsections* will inherit the CSS class specified
<2> The next section of the same level or higher will not inherit this class. +
In this example, the `Overview` section does not have the `todo` class.

a|

[.todo]
== Summary

. First Item
.. Second Item

=== Feature A

This feature needs documentation!

== Overview

Fully Documented, see...
|===


=== Delimited by Open Blocks

CSS classes can span multiple blocks or paragraphs when delimited by two hyphens `--`:

[cols=2]
|===
^|Source ^| Output

a|

[source,asciidoc]
----
[.red]
--
This paragraph is assigned the `red` CSS class.

- [x] All these list items will be red, too!
--

The next paragraph will be styled as usual

----
a|
[.red]
--
This paragraph is assigned the `red` CSS class.

- [x] All these list items will be red, too!
--
The next paragraph will be styled as usual

|===

[.language-asciidoc]
== Block Macro

Usage: ::
`+++macroname::[parameters]+++`

Block macros are used to create a block member in a document. +
A block macro must be on a single line by itself with an empty line before and after.

The `toc::[]` macro creates a table of contents block at that position in the document (to enable this feature, see <<Document Attributes,setting document attributes>> below).

Another common block macro is the `image::[]` macro;

.Block Macro
====

[cols=2]
|===
^|Source ^| Output

a|
[source,asciidoc]
----
The following image is considered the last line of this pargraph.
image::images/logo.png[]

Leaving an empty line before and after the image block macro will create a block as expected:

image::images/logo.png[]

beginning of next block...
----

a|

The following image macro is considered the last line of this pargraph.
image::images/logo.png[]

Leaving an empty line before and after the image block macro
will create a block as expected:

image::images/logo.png[]

_beginning of next block..._

|===

====

[.language-asciidoc]
== Inline Macro

Inline macros are similar to <<Block Macro,block macros>> except that the macro is replaced by inline content. +
The syntax is different in that we use a single colon `:` instead of two `::`

[cols=2]
|===
^| Source, ^| Output

a|
[source,asciidoc]
----
We can insert a logo image:images/logo.png[Logo] directly into our paragraph...
----
a|

We can insert a logo image:images/logo.png[Logo] directly into our paragraph...
|===
Optional Attributes::
In the above example, we have included some optional attributes in the square brackets that close the inline macro.
The first attribute is the 'Alt Text' of the image, followed by the width and height of the image.
The same method of passing attributes can be applied to the <<Block Macro,block macro>> above e.g. +

`image::images/logo.png[Logo,15,18]`.

[.language-asciidoc]
== Document Attributes & Variables

Usage: ::

[source,asciidoc]
----
:attribute: value

{attribute}
----
Setting document attributes is done by adding an attribute entry line as `:attribute: value` above.
Variables are declared using `{}` curly brackets and can be used for substitutions.
Attributes can be inserted anywhere in a document unless they are specific _header attributes_ as described in the next section.

.Document Attributes
====

[cols="3,2"]
|===
^|Source ^|Output

a|
[source,asciidoc]
----
:revnumber: 2.0 // <1>

Last modified:: {docdatetime}  // <2>
Revision:: {revnumber}.
----
<1> The revision number needs to be set, otherwise the attribute in the last line will be empty.
<2> `pass:[{docdatetime}]` is automatically set to last time the source document is modified

a|

:revnumber: 2.0

Last modified:: {docdatetime} +
Revision:: {revnumber}.

|===

Document attributes can be evaluated using the `pass:[ifdef::[]]` macro to create some interesting logic.
The line below checks if the backend is `HTML5` and if it is, the content in the square brackets will be included:
[source,asciidoc]
\ifdef::backend-html5[This content is included in HTML5 output.]

*Output:*

ifdef::backend-html5[This content is included in HTML5 output.]

====

.Evaluating Statements
====

The previous example shows how to include a single line of content into a document using an inline ifdef. +
The same can also be done using blocks as follows:

[cols=2]
|===
^| Source ^| Output



a|

task:ASC-13[]

[source,asciidoc,subs="macros"]
----
pass:[ifeval::[2 + 2 != 5]]

- [x] Two plus two does not a five make.

- [x] Rules of mathematics still behave as expected.

pass:[endif::[]]

----
a|
ifeval::[2 + 2 != 5]
- [x] Two plus two does not a five make.

- [x] Rules of mathematics still behave as expected.
endif::[]
|===





====


.Setting Attributes Inline
====

The following two examples set an attribute using inline shorthand:

[cols=2]
|===
| Source | Output

a|
[source,asciidoc]
----
Attributes can be set inline too:
We should {set:country:France} travel to {country}!
----
a|

Attributes can be set inline too:
We should {set:country:France} travel to {country}!

|===


====

////

Document variables temporarily broken, see: https://github.com/NumberFour/asciispec/issues/13

An example of a common document attribute is `imagesdir` which specifies the images directory.
`imagesdir` is empty by default, therefore, `+image:a.jpg[]+` will look for `a.jpg` in the same directory as the source document.

[source,asciidoc]
----
:imagesdir: images
----

Setting `imagesdir` as above saves the time of typing out the full path every time we use the `image:[]` macro. +
Usually this is done once per document but can be used multiple times:

.Setting Document Attributes
[source,asciidoc]
----
:imagesdir: images/icons

image:github.png[]

image:jira.png[]

:imagesdir: images

image:logo.png[]

----

*Output:*

:imagesdir: images/icons

image:{find}github.png[]

image:{find}jira.png[]

:imagesdir: images

image:logo.png[]

////

[.language-asciidoc]
== Header Attributes

A header starts with a document title followed by two optional lines defining author and revision information. +
Finally, document-wide settings are defined by means of _header attributes_ :

[source,asciidoc]
----
= AsciiSpec Documentation
Brian Thomas Smith
First Draft
:toc: right
----

An example header attribute is `:toc:` which sets the position of the Table of Contents in the destination document.
The above example right-aligns the Table of Contents.
Another option is to enable the use of the `toc::[]` block macro to insert a Table of Contents block in any section:

[source,asciidoc]
----
= AsciiSpec Documentation
Brian Thomas Smith
First Draft
:toc: macro

// A Table of Contents is rendered here by default

== Section two

toc::[] // But will be rendered here instead
----


A full table of the available built-in document attributes, see the http://asciidoctor.org/docs/user-manual/#builtin-attributes[Built-in Attributes] section in the AsciiDoctor User Manual.

[.language-asciidoc]
== Tables

Table blocks are typically delimited by a character (usually a pipe `|`) and three equals symbols (`|===`);


[source,asciidoc]
----
|===
| Hello | world
|===
----

|===
| Hello | world
|===

.Tables and CSV
====




A comma can be used exactly as above to separate cells in the following way:

[cols=2]
|===
a|
[source,asciidoc]
----
,===
, Hello , World
,===
----

A different character can be used to delimit cells by substituting the pipe with the separator you wish to use.

a|

[source,adoc,subs="macros"]
----
[cols=6]
,===
pass:[include::music-collection.csv[]]
,===
----
Using commas in this way can provide an easy solution to including CSV values (`include::mydata.csv[]`) into a table without having to reformat the data:

|===

====

Formatting tables:

[source,asciidoc]
----
[cols="h,d"]
|===
| Backend 3+h| Description

| html (or html5) 3+| HTML5, styled with CSS3 (default).
| pdf 3+| PDF, a portable document format. Requires the asciidoctor-pdf gem.
|===
----

In the above table, formatting attributes *3+* are used. The +++^+++ caret symbol is used to centre-align the text and *3+* indicates that the cell spans three consecutive columns.


|===
| Backend 3+^| Description

| html (or html5) 3+| HTML5, styled with CSS3 (default).
| pdf 3+| PDF, a portable document format. Requires the asciidoctor-pdf gem.
|===

A full overview of the possibilities to create complex tables can be found in the http://www.asciidoctor.org/docs/user-manual/#tables[tables section] of the User Manual.

[.language-asciidoc]
== Rich Media

Embed youtube content using the syntax `video::3NjQ9b3pgIg[youtube,800,600]`

video::3NjQ9b3pgIg[youtube,800,600]


:imagesdir:

[source,asciidoc]
----
.A tiny screenshot
image::images/logo.png[]
----

.A tiny screenshot
image::images/logo.png[]


[.language-adoc]
=== Includes

[cols="h,m,a"]
|===
|Type | Source | Output

| Include |
\include::filename.adoc[leveloffset=offset]

\include::file2.adoc[tags=tagname,tagname2]

\include::file3.adoc[lines=ranges,indent=depth]
| Includes referenced file(s) dictated by the comma-separated attributes.
| Include tags |

tag::tagname[] +

end::tagname[]  | These tags should be added in commented lines in the *included* document.
|===


:leveloffset: +1

include::cheat-sheet.adoc[]

:leveloffset: -1

[.language-asciidoc]
== Tips

=== Newlines & Line Breaks

New lines are consumed by AsciiDoctor, so in order to preserve line breaks, add a plus symbol at the end of a line or the `[%hardbreaks]` attribute;

.Line Breaks
====
[cols="3,2"]
|===
^|Source ^|Output

a|
[source,asciidoc]
----
A short line. +
A slightly longer line. +
A conclusion.

[%hardbreaks]
I believe in the power
of the imagination
to remake the world

----
a|
A short line. +
A slightly longer line. +
A conclusion.

[%hardbreaks]
I believe in the power
of the imagination
to remake the world

|===
====

=== Escaping Characters / Macros

Escaping characters characters used for formatting can be done using plus symbols:

[cols="3,2"]
|===
^|Source ^|Output

a|
[source,asciidoc]
----
A single asterisk: +*+ And a few literal characters ++* _ `++
----
a|
A single asterisk: +*+ And a few literal characters ++* _ `++
//`
|===

Backslashes can also be used to escape AsciiDoc formatting:

[cols="3,2"]
|===
^|Source ^|Output

a|
[source,asciidoc]
----
Escape \*bold* formatting +
Escape dou\**ble aster**isks
----
a|
Escape \*bold* formatting +
Escape dou\\**ble aster**isks

|===

The pass macro is also a useful way of escaping long sequences of complicated formatting.


[cols="3,2"]
|===
^|Source ^|Output

a|
[source,asciidoc]
----
pass:[*bold*, __unde**rsc__ores, double aster**isks] +
\pass:[*bold*, __unde**rsc__ores, double aster**isks] // <1>

\{revnumber} 	// <2>

+\+{revnumber}	// <3>


----
<1> The pass macro and variables can be escaped using a backslash.
<2> A backslash escapes variable substitution
<3> Preventing the escaped variable
a|

pass:[*bold*, __unde**rsc__ores, double aster**isks] +
\pass:[*bold*, __unde**rsc__ores, double aster**isks]

\{revnumber}

+\+{revnumber}

|===






=== Icons

When the attribute `:icons: font` is set, http://fontawesome.io/cheatsheet/[Font Awesome] icons can be used inline using the macro `pass:[icon:name[]]`.

.Inline Icons Example
====

[cols=2]
|===
^|Source ^| Output

a|
[source,asciidoc]
----
This is forbidden! icon:fire[]

The source is on icon:github[]
----

a|
This is forbidden! icon:fire[]

The source is on icon:github[]

|===
====

=== Colons

When learning AsciiDoc syntax, it can be confusing whether to use one or two colons for certain macros.
The rule is as follows:

[cols="h,^.^m,2d"]
|===
| Type | Syntax | Example

| Inline
| :
| We can include this `\image:test.png[]` inline
| Block
| ::
a| The following Table of Contents +

`toc::[]` +

cannot be used inline.
|===


[appendix]
== Resources

*https://github.com/NumberFour/asciispec#documentation[AsciiSpec Docs]* - NumberFour AsciiSpec Documentation +
*http://asciidoctor.org/docs/asciidoc-syntax-quick-reference/[AsciiDoc Syntax Quick Reference]* - Covers most standard formatting needs. +
*http://asciidoctor.org/docs/user-manual/[AsciiDoctor User Manual]* - Reference Manual detailing document attributes, conversion settings, extended features etc. +


=== Sublime Text packages

*https://packagecontrol.io/packages/OmniMarkupPreviewer[OmniMarkup Preview]* - Serves a live preview to a browser for realtime editing. +
*https://github.com/bsmith-n4/N4-MarkupPreview[OmniMarkup Custom Fork]* - A custom fork that provides styles and syntax highlighting aligned with AsciiSpec. +
*https://github.com/asciidoctor/sublimetext-asciidoc[Sublime Text AsciiDoc Package]* - Syntax highlighting, snippets, keymaps and more. +

=== Document Converters

*http://pandoc.org/[Pandoc]* - A universal document converter. +

